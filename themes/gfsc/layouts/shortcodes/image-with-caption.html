<!-- Allow full markdown in caption -->
<!-- https://oostens.me/posts/hugo-shortcodes-with-markdown-gotchas/ -->

{{ $filename := .Get 0 }}
{{ $alt := .Get 1 }}
{{ $class := slice "image" }}
{{ if .Get 2}}
	{{$userClass := slice "image" (.Get 2) }}
	{{$userClass = delimit $userClass "--"}}
	{{ $class = $class | append $userClass }}
{{ end }}
{{ $class = delimit $class " " }}

{{partial "captionFootNoteStart.html" (dict "filename" $filename "alt" $alt "class" $class "ctx" $ )}}
	{{ .Inner }} 
{{ partial "captionFootNoteEnd.html"}}
